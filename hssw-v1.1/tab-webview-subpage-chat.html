<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.css">
		<style>
			html,
			body {
				background-color: #efeff4;
			}
			
			.title {
				padding: 20px 15px 10px;
				color: #6d6d72;
				font-size: 15px;
				background-color: #fff;
			}
		</style>
	</head>

	<body>
		<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<!--<div class="title">
					这是 [黄山水务-监控] 选项卡，第2个子页面，该页面展示九宫格功能菜单
				</div>-->

				<div class="mui-slider">
					<div class="mui-slider-group mui-slider-loop">
						<!--支持循环，需要重复图片节点-->
						<div class="mui-slider-item mui-slider-item-duplicate">
							<a href="#"><img src="img/carrousel/4.jpg" /></a>
						</div>
						<div class="mui-slider-item">
							<a href="#"><img src="img/carrousel/1.jpg" /></a>
						</div>
						<div class="mui-slider-item">
							<a href="#"><img src="img/carrousel/2.jpg" /></a>
						</div>
						<div class="mui-slider-item">
							<a href="#"><img src="img/carrousel/3.jpg" /></a>
						</div>
						<div class="mui-slider-item">
							<a href="#"><img src="img/carrousel/4.jpg" /></a>
						</div>
						<!--支持循环，需要重复图片节点-->
						<div class="mui-slider-item mui-slider-item-duplicate">
							<a href="#"><img src="img/carrousel/1.jpg" /></a>
						</div>
					</div>
				</div>

				<div class="mui-content">
					<ul class="mui-table-view mui-grid-view mui-grid-9">
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<!--<a id="totalwork" href="content-pages/2_1_totalwork/son-wvsubpage-totalwork.html">-->
							<a id="totalwork">
								<span class="mui-icon iconfont fa fa-area-chart"></span>
								<div class="mui-media-body">综合运行</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="workwatch">
								<span class="mui-icon iconfont fa fa-bar-chart"></span>
								<div class="mui-media-body">运行总览</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="pipegis">
								<span class="mui-icon iconfont fa fa-globe"></span>
								<div class="mui-media-body">管网GIS</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4 mui">
							<a id="waterproduct">
								<span class="mui-icon iconfont fa fa-cogs"></span>
								<div class="mui-media-body">制水生产</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="presurewatch">
								<span class="mui-icon iconfont fa fa-eercast"></span>
								<div class="mui-media-body">压力监测</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="flowwatch">
								<span class="mui-icon iconfont fa fa-sellsy"></span>
								<div class="mui-media-body">流量监测</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="pumpstation">
								<span class="mui-icon iconfont fa fa-heartbeat"></span>
								<div class="mui-media-body">泵站监测</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="wateruse">
								<span class="mui-icon iconfont fa fa-pie-chart"></span>
								<div class="mui-media-body">用水分析</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="watercycle">
								<span class="mui-icon iconfont fa fa-tint"></span>
								<div class="mui-media-body">二次供水</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="warninginfo">
								<span class="mui-icon iconfont fa fa-bell-o"></span>
								<div class="mui-media-body">报警信息</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="vediowatch">
								<span class="mui-icon iconfont fa fa-video-camera"></span>
								<div class="mui-media-body">视频监控</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-4">
							<a id="more">
								<span class="mui-icon iconfont fa fa-list"></span>
								<div class="mui-media-body">更多选项</div>
							</a>
						</li>
					</ul>
				</div>

			</div>
		</div>
		<script src="js/mui.min.js"></script>
		<script src="js/jquery.min.js"></script>
		<script>
			mui.init({
				swipeBack: true,
				pullRefresh: {
					container: '#pullrefresh',
					down: {
						callback: pulldownRefresh
					},
					up: {
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});
			/**
			 * 下拉刷新具体业务实现
			 */
			function pulldownRefresh() {
				setTimeout(function() {
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
					//					for(var i = cells.length, len = i + 3; i < len; i++) {
					//						var li = document.createElement('li');
					//						li.className = 'mui-table-view-cell';
					//						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
					//						//下拉刷新，新纪录插到最前面；
					//						table.insertBefore(li, table.firstChild);
					//					}
					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
				}, 1000);
			}
			var count = 0;
			/**
			 * 上拉加载具体业务实现
			 */
			function pullupRefresh() {
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullupToRefresh((++count > 2)); //参数为true代表没有更多数据了。
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
					//					for(var i = cells.length, len = i + 20; i < len; i++) {
					//						var li = document.createElement('li');
					//						li.className = 'mui-table-view-cell';
					//						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
					//						table.appendChild(li);
					//					}
				}, 1000);
			}

			/**
			 * 图片轮播 自动循环
			 * */
			var gallery = mui('.mui-slider');
			gallery.slider({
				interval: 3000 //自动轮播周期，若为0则不自动播放，默认为0；
			});

			/**
			 * 加载子页面
			 */

			/**
			 * 选项卡点击事件
			 * */
			var wv2_subpages = ['content-pages/2_1_totalwork/son-wvsubpage-totalwork.html',
				'content-pages/2_2_workwatch/son-wvsubpage-workwatch.html',
				'content-pages/2_3_pipegis/son-wvsubpage-pipegis.html',
				'content-pages/2_4_waterproduct/son-wvsubpage-waterproduct.html',
				'content-pages/2_5_presurewatch/son-wvsubpage-presurewatch.html',
				'content-pages/2_6_flowwatch/son-wvsubpage-flowwatch.html',
				'content-pages/2_7_pumpstation/son-wvsubpage-pumpstation.html',
				'content-pages/2_8_wateruse/son-wvsubpage-wateruse.html',
				'content-pages/2_9_watercycle/son-wvsubpage-watercycle.html',
				'content-pages/2_10_warninginfo/son-wvsubpage-warninginfo.html',
				'content-pages/2_11_vediowatch/son-wvsubpage-vediowatch.html',
				'content-pages/2_12_more/son-wvsubpage-more.html'
			];
			var wv2_id = ['totalwork', 'workwatch', 'pipegis', 'waterproduct', 'presurewatch','flowwatch', 'pumpstation', 
			'wateruse', 'watercycle', 'warninginfo', 'vediowatch', 'more'];
			
			// 2-1 totalwork
			mui(".mui-table-view").on('tap', '#totalwork', function() {
				mui.openWindow({
					url: wv2_subpages[0],
					id: "totalwork-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-2 workwatch
			mui(".mui-table-view").on('tap', '#workwatch', function() {
				mui.openWindow({
					url: wv2_subpages[1],
					id: "workwatch-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-3 pipegis
			mui(".mui-table-view").on('tap', '#pipegis', function() {
				mui.openWindow({
					url: wv2_subpages[2],
					id: "pipegis-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-4 waterproduct
			mui(".mui-table-view").on('tap', '#waterproduct', function() {
				mui.openWindow({
					url: wv2_subpages[3],
					id: "waterproduct-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-5 presurewatch
			mui(".mui-table-view").on('tap', '#presurewatch', function() {
				mui.openWindow({
					url: wv2_subpages[4],
					id: "presurewatch-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-6 flowwatch
			mui(".mui-table-view").on('tap', '#flowwatch', function() {
				mui.openWindow({
					url: wv2_subpages[5],
					id: "flowwatch-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-7 pumpstation
			mui(".mui-table-view").on('tap', '#pumpstation', function() {
				mui.openWindow({
					url: wv2_subpages[6],
					id: "pumpstation-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-8 wateruse
			mui(".mui-table-view").on('tap', '#wateruse', function() {
				mui.openWindow({
					url: wv2_subpages[7],
					id: "wateruse-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-9 watercycle
			mui(".mui-table-view").on('tap', '#watercycle', function() {
				mui.openWindow({
					url: wv2_subpages[8],
					id: "watercycle-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-10 warninginfo
			mui(".mui-table-view").on('tap', '#warninginfo', function() {
				mui.openWindow({
					url: wv2_subpages[9],
					id: "warninginfo-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-11 vediowatch
			mui(".mui-table-view").on('tap', '#vediowatch', function() {
				mui.openWindow({
					url: wv2_subpages[10],
					id: "vediowatch-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
			
			// 2-12 more
			mui(".mui-table-view").on('tap', '#more', function() {
				mui.openWindow({
					url: wv2_subpages[11],
					id: "more-page",
					styles: {
						top: '45px',
						bottom: '51px'
					},
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...' //等待对话框上显示的提示内容
					}
				});
			});
		</script>
	</body>

</html>